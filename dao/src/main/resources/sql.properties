CompanyPhoneDaoSql.getCompanies=select company.company_id, company.name, company.employees, avg(phone.price) as avg_price from company left join phone on phone.company_id= company.company_id where (company.employees>=:minEmployees or :minEmployees IS NULL) and (company.employees<=:maxEmployees or :maxEmployees IS NULL) group by company.company_id
CompanyPhoneDaoSql.getPhones=select phone.phone_id, phone.name, phone.price, phone.company_id, company.name from phone inner join company on phone.company_id = company.company_id where (price>=:minPrice or :minPrice IS NULL) and (price<=:maxPrice or :maxPrice IS NULL)
CompanyPhoneDaoSql.getCompanyById=select * from phone a right join (select company.company_id, company.name as company_name, company.employees, avg(phone.price) as avg_price from company left join phone on phone.company_id= company.company_id group by company.company_id) b on a.company_id = b.company_id where b.company_id=:companyId
CompanyPhoneDaoSql.getCompanyByName=select * from phone a right join (select company.company_id, company.name as company_name, company.employees, avg(phone.price) as avg_price from company left join phone on phone.company_id= company.company_id group by company.company_id) b on a.company_id = b.company_id where b.company_name=:name
CompanyPhoneDaoSql.getPhoneById=select phone.phone_id, phone.name, phone.price, phone.company_id, company.name from phone inner join company on phone.company_id = company.company_id where phone_id=:phoneId
CompanyPhoneDaoSql.addCompany=insert into company (name, employees) values ( :name, :employees)
CompanyPhoneDaoSql.addPhones=insert into phone (name, price, company_id) values (:name, :price, :companyId)
CompanyPhoneDaoSql.updateCompany=update company set name=:name, employees=:employees where company_id=:companyId
CompanyPhoneDaoSql.updatePhones=update phone set name=:name, price=:price, company_id=:companyId where phone_id=:phoneId
CompanyPhoneDaoSql.deleteCompany=delete from company where company_id=:companyId
CompanyPhoneDaoSql.deletePhones=delete from phone where phone_id=:phoneId